<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        table{
            text-align: center;
            margin: 0 auto;
            font-size: 50px;
            border: 2px solid black;
            cursor: pointer;
        }
        td {
            width: 60px;
            padding: 30px;
            background-color: #f9f9f9;
            border: 2px solid black;
        }

        td:hover {
            background-color: #edeaea;
            font-weight: 900;
        }
    </style>

</head>
<body>
    <table border="1px solid black">
        <tbody>
            <tr>
                <td onclick="move(0,0)" id = "0_0">1</td>
                <td onclick="move(0,1)" id = "0_1">2</td>
                <td onclick="move(0,2)" id = "0_2">3</td>
                <td onclick="move(0,3)" id = "0_3">4</td>
            </tr>
            <tr>
                <td onclick="move(1,0)" id = "1_0" >5</td>
                <td onclick="move(1,1)" id = "1_1" >6</td>
                <td onclick="move(1,2)" id = "1_2" >7</td>
                <td onclick="move(1,3)" id = "1_3" >8</td>
            </tr>
            <tr>
                <td onclick="move(2,0)" id = "2_0">9</td>
                <td onclick="move(2,1)" id = "2_1">10</td>
                <td onclick="move(2,2)" id = "2_2">11</td>
                <td onclick="move(2,3)" id = "2_3">12</td>
            </tr>
            <tr>
                <td onclick="move(3,0)" id = "3_0">13</td>
                <td onclick="move(3,1)" id = "3_1">14</td>
                <td onclick="move(3,2)" id = "3_2">15</td>
                <td onclick="move(3,3)" id = "3_3"></td>
            </tr>
        </tbody>
    </table>


    <script>
        var numbers = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];
        for (var i = 0; i <200; i++){
            var poz1 = Math.floor(Math.random()*16);
            var poz2 = Math.floor(Math.random()*16);

            var temp = numbers[poz1];
            numbers[poz1] = numbers[poz2];
            numbers[poz2] = temp;
        }

        var k = 0;
        for (var i = 0 ; i< 4; i++) {
            for (var j =0; j< 4; j++){
                if (numbers[k]){
                    document.getElementById(i+"_"+j).innerText = numbers[k++];
                } else {
                    document.getElementById(i+"_"+j).innerText = "";
                    k++;
                }
            }
        }

        function move(row, col){

            var top = row-1;
            var bottom = row+1;
            var left = col - 1;
            var right = col + 1;

            //
            if (top >= 0 && document.getElementById(top+"_"+col).innerText == ""){
                document.getElementById(top+"_"+col).innerText = document.getElementById(row+"_"+col).innerText;
                document.getElementById(row+"_"+col).innerText = "";
            } else if (bottom < 4 && document.getElementById(bottom+"_"+col).innerText == ""){
                document.getElementById(bottom+"_"+col).innerText = document.getElementById(row+"_"+col).innerText;
                document.getElementById(row+"_"+col).innerText = "";
            } else if (left >= 0 && document.getElementById(row+"_"+left).innerText == ""){
                document.getElementById(row+"_"+left).innerText = document.getElementById(row+"_"+col).innerText;
                document.getElementById(row+"_"+col).innerText = "";
            } else if (right <4 && document.getElementById(row+"_"+right).innerText == ""){
                document.getElementById(row+"_"+right).innerText = document.getElementById(row+"_"+col).innerText;
                document.getElementById(row+"_"+col).innerText = "";
            }

            checkWinner();
        }

        function checkWinner (){
            var k = 1;
            var check_winner = true;
            for (var i = 0 ; i< 4; i++) {
                for (var j =0; j< 4; j++){
                    if (i == 3 && j== 3){
                        continue;
                    }
                    if (parseInt(document.getElementById(i+"_"+j).innerText) != k++){
                        check_winner = false;
                        break;
                    }
                }
            }
            if (check_winner){
                alert("Ju sapo fituat.");
                window.location.reload();
            }

        }

    </script>
</body>
</html>